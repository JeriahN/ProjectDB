/*! For license information please see vendors-node_modules_vidstack_dev_providers_vidstack-vimeo_js.main.js.LICENSE.txt */
"use strict";(self.webpackChunkProjectDB=self.webpackChunkProjectDB||[]).push([["vendors-node_modules_vidstack_dev_providers_vidstack-vimeo_js"],{"./node_modules/vidstack/dev/chunks/vidstack-BTBUzdbF.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getVimeoVideoInfo: () => (/* binding */ getVimeoVideoInfo),\n/* harmony export */   resolveVimeoVideoId: () => (/* binding */ resolveVimeoVideoId)\n/* harmony export */ });\nconst videoIdRE = /(?:https:\\/\\/)?(?:player\\.)?vimeo(?:\\.com)?\\/(?:video\\/)?(\\d+)(?:\\?hash=(.*))?/;\nconst infoCache = /* @__PURE__ */ new Map();\nconst pendingFetch = /* @__PURE__ */ new Map();\nfunction resolveVimeoVideoId(src) {\n  const matches = src.match(videoIdRE);\n  return { videoId: matches?.[1], hash: matches?.[2] };\n}\nasync function getVimeoVideoInfo(videoId, abort) {\n  if (infoCache.has(videoId))\n    return infoCache.get(videoId);\n  if (pendingFetch.has(videoId))\n    return pendingFetch.get(videoId);\n  const oembedSrc = `https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/${videoId}`;\n  const promise = window.fetch(oembedSrc, {\n    mode: "cors",\n    signal: abort.signal\n  }).then((response) => response.json()).then((data) => {\n    const thumnailRegex = /vimeocdn.com\\/video\\/(.*)?_/, thumbnailId = data?.thumbnail_url?.match(thumnailRegex)?.[1], poster = thumbnailId ? `https://i.vimeocdn.com/video/${thumbnailId}_1920x1080.webp` : "", info = {\n      title: data?.title ?? "",\n      duration: data?.duration ?? 0,\n      poster,\n      pro: data.account_type !== "basic"\n    };\n    infoCache.set(videoId, info);\n    return info;\n  }).finally(() => pendingFetch.delete(videoId));\n  pendingFetch.set(videoId, promise);\n  return promise;\n}\n\n\n\n\n//# sourceURL=webpack://ProjectDB/./node_modules/vidstack/dev/chunks/vidstack-BTBUzdbF.js?')},"./node_modules/vidstack/dev/chunks/vidstack-DJHyIwQd.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   R: () => (/* binding */ RAFLoop)\n/* harmony export */ });\n/* harmony import */ var _vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vidstack-mrj_B2Yo.js */ "./node_modules/vidstack/dev/chunks/vidstack-mrj_B2Yo.js");\n\n\nclass RAFLoop {\n  constructor(_callback) {\n    this._callback = _callback;\n  }\n  _start() {\n    if (!(0,_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_0__.h)(this._id))\n      return;\n    this._loop();\n  }\n  _stop() {\n    if ((0,_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_0__.j)(this._id))\n      window.cancelAnimationFrame(this._id);\n    this._id = void 0;\n  }\n  _loop() {\n    this._id = window.requestAnimationFrame(() => {\n      if ((0,_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_0__.h)(this._id))\n        return;\n      this._callback();\n      this._loop();\n    });\n  }\n}\n\n\n\n\n//# sourceURL=webpack://ProjectDB/./node_modules/vidstack/dev/chunks/vidstack-DJHyIwQd.js?')},"./node_modules/vidstack/dev/chunks/vidstack-U-OfZdzz.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   E: () => (/* binding */ EmbedProvider),\n/* harmony export */   t: () => (/* binding */ timedPromise)\n/* harmony export */ });\n/* harmony import */ var _vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vidstack-mrj_B2Yo.js */ "./node_modules/vidstack/dev/chunks/vidstack-mrj_B2Yo.js");\n/* harmony import */ var _vidstack_Chu5mi6j_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./vidstack-Chu5mi6j.js */ "./node_modules/vidstack/dev/chunks/vidstack-Chu5mi6j.js");\n\n\n\nfunction timedPromise(callback, ms = 3e3) {\n  const promise = (0,_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_0__.n)();\n  setTimeout(() => {\n    const rejection = callback();\n    if (rejection)\n      promise.reject(rejection);\n  }, ms);\n  return promise;\n}\n\nclass EmbedProvider {\n  constructor(_iframe) {\n    this._iframe = _iframe;\n    this._src = (0,_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_0__.f)("");\n    /**\n     * Defines which referrer is sent when fetching the resource.\n     *\n     * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLIFrameElement/referrerPolicy}\n     */\n    this.referrerPolicy = null;\n    _iframe.setAttribute("frameBorder", "0");\n    _iframe.setAttribute("aria-hidden", "true");\n    _iframe.setAttribute(\n      "allow",\n      "autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"\n    );\n    if (this.referrerPolicy !== null) {\n      _iframe.setAttribute("referrerpolicy", this.referrerPolicy);\n    }\n  }\n  get iframe() {\n    return this._iframe;\n  }\n  setup() {\n    (0,_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_0__.l)(window, "message", this._onWindowMessage.bind(this));\n    (0,_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_0__.l)(this._iframe, "load", this._onLoad.bind(this));\n    (0,_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_0__.g)(this._watchSrc.bind(this));\n  }\n  _watchSrc() {\n    const src = this._src();\n    if (!src.length) {\n      this._iframe.setAttribute("src", "");\n      return;\n    }\n    const params = (0,_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_0__.p)(() => this._buildParams());\n    this._iframe.setAttribute("src", (0,_vidstack_Chu5mi6j_js__WEBPACK_IMPORTED_MODULE_1__.a)(src, params));\n  }\n  _postMessage(message, target) {\n    this._iframe.contentWindow?.postMessage(JSON.stringify(message), target ?? "*");\n  }\n  _onWindowMessage(event) {\n    const origin = this._getOrigin(), isOriginMatch = (event.source === null || event.source === this._iframe?.contentWindow) && (!(0,_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_0__.i)(origin) || origin === event.origin);\n    if (!isOriginMatch)\n      return;\n    try {\n      const message = JSON.parse(event.data);\n      if (message)\n        this._onMessage(message, event);\n      return;\n    } catch (e) {\n    }\n    if (event.data)\n      this._onMessage(event.data, event);\n  }\n}\n\n\n\n\n//# sourceURL=webpack://ProjectDB/./node_modules/vidstack/dev/chunks/vidstack-U-OfZdzz.js?')},"./node_modules/vidstack/dev/providers/vidstack-vimeo.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VimeoProvider: () => (/* binding */ VimeoProvider)\n/* harmony export */ });\n/* harmony import */ var _chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../chunks/vidstack-mrj_B2Yo.js */ "./node_modules/vidstack/dev/chunks/vidstack-mrj_B2Yo.js");\n/* harmony import */ var _chunks_vidstack_Bdqy3iGv_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../chunks/vidstack-Bdqy3iGv.js */ "./node_modules/vidstack/dev/chunks/vidstack-Bdqy3iGv.js");\n/* harmony import */ var _chunks_vidstack_xAXVpXZQ_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../chunks/vidstack-xAXVpXZQ.js */ "./node_modules/vidstack/dev/chunks/vidstack-xAXVpXZQ.js");\n/* harmony import */ var _chunks_vidstack_CnaYRoc3_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../chunks/vidstack-CnaYRoc3.js */ "./node_modules/vidstack/dev/chunks/vidstack-CnaYRoc3.js");\n/* harmony import */ var _chunks_vidstack_1gmLGa6x_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../chunks/vidstack-1gmLGa6x.js */ "./node_modules/vidstack/dev/chunks/vidstack-1gmLGa6x.js");\n/* harmony import */ var _chunks_vidstack_DJHyIwQd_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../chunks/vidstack-DJHyIwQd.js */ "./node_modules/vidstack/dev/chunks/vidstack-DJHyIwQd.js");\n/* harmony import */ var _chunks_vidstack_Chu5mi6j_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../chunks/vidstack-Chu5mi6j.js */ "./node_modules/vidstack/dev/chunks/vidstack-Chu5mi6j.js");\n/* harmony import */ var _chunks_vidstack_U_OfZdzz_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunks/vidstack-U-OfZdzz.js */ "./node_modules/vidstack/dev/chunks/vidstack-U-OfZdzz.js");\n/* harmony import */ var _chunks_vidstack_BTBUzdbF_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../chunks/vidstack-BTBUzdbF.js */ "./node_modules/vidstack/dev/chunks/vidstack-BTBUzdbF.js");\n\n\n\n\n\n\n\n\n\n\n\n\nconst trackedVimeoEvents = [\n  "bufferend",\n  "bufferstart",\n  // \'cuechange\',\n  "durationchange",\n  "ended",\n  "enterpictureinpicture",\n  "error",\n  "fullscreenchange",\n  "leavepictureinpicture",\n  "loaded",\n  // \'loadeddata\',\n  // \'loadedmetadata\',\n  // \'loadstart\',\n  "playProgress",\n  "loadProgress",\n  "pause",\n  "play",\n  "playbackratechange",\n  // \'progress\',\n  "qualitychange",\n  "seeked",\n  "seeking",\n  // \'texttrackchange\',\n  "timeupdate",\n  "volumechange",\n  "waiting"\n  // \'adstarted\',\n  // \'adcompleted\',\n  // \'aderror\',\n  // \'adskipped\',\n  // \'adallcompleted\',\n  // \'adclicked\',\n  // \'chapterchange\',\n  // \'chromecastconnected\',\n  // \'remoteplaybackavailabilitychange\',\n  // \'remoteplaybackconnecting\',\n  // \'remoteplaybackconnect\',\n  // \'remoteplaybackdisconnect\',\n  // \'liveeventended\',\n  // \'liveeventstarted\',\n  // \'livestreamoffline\',\n  // \'livestreamonline\',\n];\n\nclass VimeoProvider extends _chunks_vidstack_U_OfZdzz_js__WEBPACK_IMPORTED_MODULE_0__.E {\n  constructor(iframe, _ctx) {\n    super(iframe);\n    this._ctx = _ctx;\n    this.$$PROVIDER_TYPE = "VIMEO";\n    this.scope = (0,_chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__.r)();\n    this._played = 0;\n    this._playedRange = new _chunks_vidstack_Bdqy3iGv_js__WEBPACK_IMPORTED_MODULE_2__.T(0, 0);\n    this._seekableRange = new _chunks_vidstack_Bdqy3iGv_js__WEBPACK_IMPORTED_MODULE_2__.T(0, 0);\n    this._playPromise = null;\n    this._pausePromise = null;\n    this._videoInfoPromise = null;\n    this._videoId = (0,_chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__.f)("");\n    this._pro = (0,_chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__.f)(false);\n    this._hash = null;\n    this._currentSrc = null;\n    this._currentCue = null;\n    this._timeRAF = new _chunks_vidstack_DJHyIwQd_js__WEBPACK_IMPORTED_MODULE_3__.R(this._onAnimationFrame.bind(this));\n    this._chaptersTrack = null;\n    /**\n     * Whether tracking session data should be enabled on the embed, including cookies and analytics.\n     * This is turned off by default to be GDPR-compliant.\n     *\n     * @defaultValue `false`\n     */\n    this.cookies = false;\n    this.title = true;\n    this.byline = true;\n    this.portrait = true;\n    this.color = "00ADEF";\n    // Embed will sometimes dispatch 0 at end of playback.\n    this._preventTimeUpdates = false;\n  }\n  get _notify() {\n    return this._ctx.delegate._notify;\n  }\n  get type() {\n    return "vimeo";\n  }\n  get currentSrc() {\n    return this._currentSrc;\n  }\n  get videoId() {\n    return this._videoId();\n  }\n  get hash() {\n    return this._hash;\n  }\n  get isPro() {\n    return this._pro();\n  }\n  preconnect() {\n    (0,_chunks_vidstack_Chu5mi6j_js__WEBPACK_IMPORTED_MODULE_4__.p)(this._getOrigin());\n  }\n  setup() {\n    super.setup();\n    (0,_chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__.g)(this._watchVideoId.bind(this));\n    (0,_chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__.g)(this._watchVideoInfo.bind(this));\n    (0,_chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__.g)(this._watchPro.bind(this));\n    this._notify("provider-setup", this);\n  }\n  destroy() {\n    this._reset();\n    this._remote("destroy");\n  }\n  async play() {\n    const { paused } = this._ctx.$state;\n    if (!this._playPromise) {\n      this._playPromise = (0,_chunks_vidstack_U_OfZdzz_js__WEBPACK_IMPORTED_MODULE_0__.t)(() => {\n        this._playPromise = null;\n        if (paused())\n          return "Timed out.";\n      });\n      this._remote("play");\n    }\n    return this._playPromise.promise;\n  }\n  async pause() {\n    const { paused } = this._ctx.$state;\n    if (!this._pausePromise) {\n      this._pausePromise = (0,_chunks_vidstack_U_OfZdzz_js__WEBPACK_IMPORTED_MODULE_0__.t)(() => {\n        this._pausePromise = null;\n        if (!paused())\n          return "Timed out.";\n      });\n      this._remote("pause");\n    }\n    return this._pausePromise.promise;\n  }\n  setMuted(muted) {\n    this._remote("setMuted", muted);\n  }\n  setCurrentTime(time) {\n    this._remote("seekTo", time);\n    this._notify("seeking", time);\n  }\n  setVolume(volume) {\n    this._remote("setVolume", volume);\n    this._remote("setMuted", (0,_chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__.p)(this._ctx.$state.muted));\n  }\n  setPlaybackRate(rate) {\n    this._remote("setPlaybackRate", rate);\n  }\n  async loadSource(src) {\n    if (!(0,_chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__.i)(src.src)) {\n      this._currentSrc = null;\n      this._hash = null;\n      this._videoId.set("");\n      return;\n    }\n    const { videoId, hash } = (0,_chunks_vidstack_BTBUzdbF_js__WEBPACK_IMPORTED_MODULE_5__.resolveVimeoVideoId)(src.src);\n    this._videoId.set(videoId ?? "");\n    this._hash = hash ?? null;\n    this._currentSrc = src;\n  }\n  _watchVideoId() {\n    this._reset();\n    const videoId = this._videoId();\n    if (!videoId) {\n      this._src.set("");\n      return;\n    }\n    this._src.set(`${this._getOrigin()}/video/${videoId}`);\n    this._notify("load-start");\n  }\n  _watchVideoInfo() {\n    const videoId = this._videoId();\n    if (!videoId)\n      return;\n    const promise = (0,_chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__.n)(), abort = new AbortController();\n    this._videoInfoPromise = promise;\n    (0,_chunks_vidstack_BTBUzdbF_js__WEBPACK_IMPORTED_MODULE_5__.getVimeoVideoInfo)(videoId, abort).then((info) => {\n      promise.resolve(info);\n    }).catch((e) => {\n      promise.reject();\n      {\n        this._ctx.logger?.warnGroup(`Failed to fetch vimeo video info for id \\`${videoId}\\`.`).labelledLog("Error", e).dispatch();\n      }\n    });\n    return () => {\n      promise.reject();\n      abort.abort();\n    };\n  }\n  _watchPro() {\n    const isPro = this._pro(), { $state, qualities } = this._ctx;\n    $state.canSetPlaybackRate.set(isPro);\n    qualities[_chunks_vidstack_CnaYRoc3_js__WEBPACK_IMPORTED_MODULE_6__.L._setReadonly](!isPro);\n    if (isPro) {\n      return (0,_chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__.l)(qualities, "change", () => {\n        if (qualities.auto)\n          return;\n        const id = qualities.selected?.id;\n        if (id)\n          this._remote("setQuality", id);\n      });\n    }\n  }\n  _getOrigin() {\n    return "https://player.vimeo.com";\n  }\n  _buildParams() {\n    const { keyDisabled } = this._ctx.$props, { playsInline, nativeControls } = this._ctx.$state, showControls = nativeControls();\n    return {\n      title: this.title,\n      byline: this.byline,\n      color: this.color,\n      portrait: this.portrait,\n      controls: showControls,\n      h: this.hash,\n      keyboard: showControls && !keyDisabled(),\n      transparent: true,\n      playsinline: playsInline(),\n      dnt: !this.cookies\n    };\n  }\n  _onAnimationFrame() {\n    this._remote("getCurrentTime");\n  }\n  _onTimeUpdate(time, trigger) {\n    if (this._preventTimeUpdates && time === 0)\n      return;\n    const { realCurrentTime, realDuration, paused, bufferedEnd } = this._ctx.$state;\n    if (realCurrentTime() === time)\n      return;\n    const prevTime = realCurrentTime(), detail = {\n      currentTime: time,\n      played: this._getPlayedRange(time)\n    };\n    this._notify("time-update", detail, trigger);\n    if (Math.abs(prevTime - time) > 1.5) {\n      this._notify("seeking", time, trigger);\n      if (!paused() && bufferedEnd() < time) {\n        this._notify("waiting", void 0, trigger);\n      }\n    }\n    if (realDuration() - time < 0.01) {\n      this._notify("end", void 0, trigger);\n      this._preventTimeUpdates = true;\n      setTimeout(() => {\n        this._preventTimeUpdates = false;\n      }, 500);\n    }\n  }\n  _getPlayedRange(time) {\n    return this._played >= time ? this._playedRange : this._playedRange = new _chunks_vidstack_Bdqy3iGv_js__WEBPACK_IMPORTED_MODULE_2__.T(0, this._played = time);\n  }\n  _onSeeked(time, trigger) {\n    this._notify("seeked", time, trigger);\n  }\n  _onLoaded(trigger) {\n    const videoId = this._videoId();\n    this._videoInfoPromise?.promise.then((info) => {\n      if (!info)\n        return;\n      const { title, poster, duration, pro } = info;\n      this._pro.set(pro);\n      this._notify("title-change", title, trigger);\n      this._notify("poster-change", poster, trigger);\n      this._notify("duration-change", duration, trigger);\n      this._onReady(duration, trigger);\n    }).catch(() => {\n      if (videoId !== this._videoId())\n        return;\n      this._remote("getVideoTitle");\n      this._remote("getDuration");\n    });\n  }\n  _onReady(duration, trigger) {\n    const { nativeControls } = this._ctx.$state, showEmbedControls = nativeControls();\n    this._seekableRange = new _chunks_vidstack_Bdqy3iGv_js__WEBPACK_IMPORTED_MODULE_2__.T(0, duration);\n    const detail = {\n      buffered: new _chunks_vidstack_Bdqy3iGv_js__WEBPACK_IMPORTED_MODULE_2__.T(0, 0),\n      seekable: this._seekableRange,\n      duration\n    };\n    this._ctx.delegate._ready(detail, trigger);\n    if (!showEmbedControls) {\n      this._remote("_hideOverlay");\n    }\n    this._remote("getQualities");\n    this._remote("getChapters");\n  }\n  _onMethod(method, data, trigger) {\n    switch (method) {\n      case "getVideoTitle":\n        const videoTitle = data;\n        this._notify("title-change", videoTitle, trigger);\n        break;\n      case "getDuration":\n        const duration = data;\n        if (!this._ctx.$state.canPlay()) {\n          this._onReady(duration, trigger);\n        } else {\n          this._notify("duration-change", duration, trigger);\n        }\n        break;\n      case "getCurrentTime":\n        this._onTimeUpdate(data, trigger);\n        break;\n      case "getBuffered":\n        if ((0,_chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__.v)(data) && data.length) {\n          this._onLoadProgress(data[data.length - 1][1], trigger);\n        }\n        break;\n      case "setMuted":\n        this._onVolumeChange((0,_chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__.p)(this._ctx.$state.volume), data, trigger);\n        break;\n      case "getChapters":\n        this._onChaptersChange(data);\n        break;\n      case "getQualities":\n        this._onQualitiesChange(data, trigger);\n        break;\n    }\n  }\n  _attachListeners() {\n    for (const type of trackedVimeoEvents) {\n      this._remote("addEventListener", type);\n    }\n  }\n  _onPause(trigger) {\n    this._timeRAF._stop();\n    this._notify("pause", void 0, trigger);\n    this._pausePromise?.resolve();\n    this._pausePromise = null;\n  }\n  _onPlay(trigger) {\n    this._timeRAF._start();\n    this._notify("play", void 0, trigger);\n    this._playPromise?.resolve();\n    this._playPromise = null;\n  }\n  _onPlayProgress(trigger) {\n    const { paused } = this._ctx.$state;\n    if (!paused() && !this._preventTimeUpdates) {\n      this._notify("playing", void 0, trigger);\n    }\n  }\n  _onLoadProgress(buffered, trigger) {\n    const detail = {\n      buffered: new _chunks_vidstack_Bdqy3iGv_js__WEBPACK_IMPORTED_MODULE_2__.T(0, buffered),\n      seekable: this._seekableRange\n    };\n    this._notify("progress", detail, trigger);\n  }\n  _onBufferStart(trigger) {\n    this._notify("waiting", void 0, trigger);\n  }\n  _onBufferEnd(trigger) {\n    const { paused } = this._ctx.$state;\n    if (!paused())\n      this._notify("playing", void 0, trigger);\n  }\n  _onWaiting(trigger) {\n    const { paused } = this._ctx.$state;\n    if (paused()) {\n      this._notify("play", void 0, trigger);\n    }\n    this._notify("waiting", void 0, trigger);\n  }\n  _onVolumeChange(volume, muted, trigger) {\n    const detail = { volume, muted };\n    this._notify("volume-change", detail, trigger);\n  }\n  // protected _onTextTrackChange(track: VimeoTextTrack, trigger: Event) {\n  //   const textTrack = this._ctx.textTracks.toArray().find((t) => t.language === track.language);\n  //   if (textTrack) textTrack.mode = track.mode;\n  // }\n  // protected _onTextTracksChange(tracks: VimeoTextTrack[], trigger: Event) {\n  //   for (const init of tracks) {\n  //     const textTrack = new TextTrack({\n  //       ...init,\n  //       label: init.label.replace(\'auto-generated\', \'auto\'),\n  //     });\n  //     textTrack[TextTrackSymbol._readyState] = 2;\n  //     this._ctx.textTracks.add(textTrack, trigger);\n  //     textTrack.setMode(init.mode, trigger);\n  //   }\n  // }\n  // protected _onCueChange(cue: VimeoTextCue, trigger: Event) {\n  //   const { textTracks, $state } = this._ctx,\n  //     { currentTime } = $state,\n  //     track = textTracks.selected;\n  //   if (this._currentCue) track?.removeCue(this._currentCue, trigger);\n  //   this._currentCue = new window.VTTCue(currentTime(), Number.MAX_SAFE_INTEGER, cue.text);\n  //   track?.addCue(this._currentCue, trigger);\n  // }\n  _onChaptersChange(chapters) {\n    this._removeChapters();\n    if (!chapters.length)\n      return;\n    const track = new _chunks_vidstack_xAXVpXZQ_js__WEBPACK_IMPORTED_MODULE_7__.T({\n      kind: "chapters",\n      default: true\n    }), { realDuration } = this._ctx.$state;\n    for (let i = 0; i < chapters.length; i++) {\n      const chapter = chapters[i], nextChapter = chapters[i + 1];\n      track.addCue(\n        new window.VTTCue(\n          chapter.startTime,\n          nextChapter?.startTime ?? realDuration(),\n          chapter.title\n        )\n      );\n    }\n    this._chaptersTrack = track;\n    this._ctx.textTracks.add(track);\n  }\n  _removeChapters() {\n    if (!this._chaptersTrack)\n      return;\n    this._ctx.textTracks.remove(this._chaptersTrack);\n    this._chaptersTrack = null;\n  }\n  _onQualitiesChange(qualities, trigger) {\n    this._ctx.qualities[_chunks_vidstack_1gmLGa6x_js__WEBPACK_IMPORTED_MODULE_8__.Q._enableAuto] = qualities.some((q) => q.id === "auto") ? () => this._remote("setQuality", "auto") : void 0;\n    for (const quality of qualities) {\n      if (quality.id === "auto")\n        continue;\n      const height = +quality.id.slice(0, -1);\n      if (isNaN(height))\n        continue;\n      this._ctx.qualities[_chunks_vidstack_CnaYRoc3_js__WEBPACK_IMPORTED_MODULE_6__.L._add](\n        {\n          id: quality.id,\n          width: height * (16 / 9),\n          height,\n          codec: "avc1,h.264",\n          bitrate: -1\n        },\n        trigger\n      );\n    }\n    this._onQualityChange(\n      qualities.find((q) => q.active),\n      trigger\n    );\n  }\n  _onQualityChange({ id } = {}, trigger) {\n    if (!id)\n      return;\n    const isAuto = id === "auto", newQuality = this._ctx.qualities.getById(id);\n    if (isAuto) {\n      this._ctx.qualities[_chunks_vidstack_1gmLGa6x_js__WEBPACK_IMPORTED_MODULE_8__.Q._setAuto](isAuto, trigger);\n      this._ctx.qualities[_chunks_vidstack_CnaYRoc3_js__WEBPACK_IMPORTED_MODULE_6__.L._select](void 0, true, trigger);\n    } else {\n      this._ctx.qualities[_chunks_vidstack_CnaYRoc3_js__WEBPACK_IMPORTED_MODULE_6__.L._select](newQuality ?? void 0, true, trigger);\n    }\n  }\n  _onEvent(event, payload, trigger) {\n    switch (event) {\n      case "ready":\n        this._attachListeners();\n        break;\n      case "loaded":\n        this._onLoaded(trigger);\n        break;\n      case "play":\n        this._onPlay(trigger);\n        break;\n      case "playProgress":\n        this._onPlayProgress(trigger);\n        break;\n      case "pause":\n        this._onPause(trigger);\n        break;\n      case "loadProgress":\n        this._onLoadProgress(payload.seconds, trigger);\n        break;\n      case "waiting":\n        this._onWaiting(trigger);\n        break;\n      case "bufferstart":\n        this._onBufferStart(trigger);\n        break;\n      case "bufferend":\n        this._onBufferEnd(trigger);\n        break;\n      case "volumechange":\n        this._onVolumeChange(payload.volume, (0,_chunks_vidstack_mrj_B2Yo_js__WEBPACK_IMPORTED_MODULE_1__.p)(this._ctx.$state.muted), trigger);\n        break;\n      case "durationchange":\n        this._seekableRange = new _chunks_vidstack_Bdqy3iGv_js__WEBPACK_IMPORTED_MODULE_2__.T(0, payload.duration);\n        this._notify("duration-change", payload.duration, trigger);\n        break;\n      case "playbackratechange":\n        this._notify("rate-change", payload.playbackRate, trigger);\n        break;\n      case "qualitychange":\n        this._onQualityChange(payload, trigger);\n        break;\n      case "fullscreenchange":\n        this._notify("fullscreen-change", payload.fullscreen, trigger);\n        break;\n      case "enterpictureinpicture":\n        this._notify("picture-in-picture-change", true, trigger);\n        break;\n      case "leavepictureinpicture":\n        this._notify("picture-in-picture-change", false, trigger);\n        break;\n      case "ended":\n        this._notify("end", void 0, trigger);\n        break;\n      case "error":\n        this._onError(payload, trigger);\n        break;\n      case "seek":\n      case "seeked":\n        this._onSeeked(payload.seconds, trigger);\n        break;\n    }\n  }\n  _onError(error, trigger) {\n    if (error.method === "setPlaybackRate") {\n      this._pro.set(false);\n    }\n    if (error.method === "play") {\n      this._playPromise?.reject(error.message);\n      return;\n    }\n    {\n      this._ctx.logger?.errorGroup(`[vimeo]: ${error.message}`).labelledLog("Error", error).labelledLog("Provider", this).labelledLog("Event", trigger).dispatch();\n    }\n  }\n  _onMessage(message, event) {\n    if (message.event) {\n      this._onEvent(message.event, message.data, event);\n    } else if (message.method) {\n      this._onMethod(message.method, message.value, event);\n    }\n  }\n  _onLoad() {\n  }\n  _remote(command, arg) {\n    return this._postMessage({\n      method: command,\n      value: arg\n    });\n  }\n  _reset() {\n    this._timeRAF._stop();\n    this._played = 0;\n    this._playedRange = new _chunks_vidstack_Bdqy3iGv_js__WEBPACK_IMPORTED_MODULE_2__.T(0, 0);\n    this._seekableRange = new _chunks_vidstack_Bdqy3iGv_js__WEBPACK_IMPORTED_MODULE_2__.T(0, 0);\n    this._playPromise = null;\n    this._pausePromise = null;\n    this._videoInfoPromise = null;\n    this._currentCue = null;\n    this._pro.set(false);\n    this._removeChapters();\n  }\n}\n\n\n\n\n//# sourceURL=webpack://ProjectDB/./node_modules/vidstack/dev/providers/vidstack-vimeo.js?')}}]);